{% extends 'base.html' %}

{% block head %}
<title>Forum</title>
{% endblock %}

{% block body %}
<div class="content">
    <div class="main">
        {% if moderator == True %}
        <h4>Hello Janny</h4>
        {% endif %}
        <h4>Make A Thread</h4>
        <div class="form">
            <form action="/" method="POST">
                <input type="text" name="title" id="title" placeholder="Title">
                <input type="text" name="author" id="author" placeholder="Author">
                <textarea type="text" name="content" id="content" placeholder="Content"></textarea>
                <input type="submit" value="Create Thread" id="submit">
            </form>
        </div>
        {% if threads|length < 1 %}
        <h4 style="text-align: center">There are no threads. Create one above!</h4>
        {% else %}
            {% for thread in threads %}
            <hr>
            <div class="row">
                <a href="/thread/{{thread.id}}">
                    <div class="meta">
                        <p class="author">
                            {{thread.author}}
                        </p>
                        <p class="timestamp">
                            {{thread.date.date()}}
                        </p>
                    </div>
                    <h4 class="title">
                        {{thread.title}}
                    </h4>
                    <div class="meta">
                        <p class="comment-count">
                            {{thread.comments|length}} Comments
                        </p>
                    </div>
                </a>
                {% if moderator == True %}
                <form action="/delete/{{thread.id}}" class="control" method="POST">
                    <input type="submit" value="Delete Thread" id="submit">
                </form>
                {% endif %}
            </div>
            {% endfor %}
        {% endif %}
    </div>
</div>
{% endblock %}